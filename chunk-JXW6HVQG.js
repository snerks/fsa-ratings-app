import{c as w,d as D}from"./chunk-FXBR56JX.js";import"./chunk-YNQPX5G6.js";import{a as b,b as y,c as _,d as M,e as S,f as I}from"./chunk-HZ5WH2B5.js";import{$a as f,Db as r,Ea as s,Eb as c,Na as p,Q as m,V as o,ab as u,bb as R,cb as x,eb as i,fb as a,ha as d,jc as h,pb as v,qb as C}from"./chunk-IQ7A5KLV.js";var l=class t{httpClient=o(h);baseUrl="https://api.ratings.food.gov.uk/";headersOptions={headers:{"x-api-version":"2"}};getRatingsResponse(){return this.httpClient.get(`${this.baseUrl}Ratings`,this.headersOptions)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};var E=(t,n)=>n.ratingId;function N(t,n){t&1&&(i(0,"div",4),r(1,"Loading ratings..."),a())}function j(t,n){if(t&1&&(i(0,"div",6)(1,"span",7),r(2),a(),i(3,"span",8),r(4),a()()),t&2){let e=n.$implicit;s(2),c(e.ratingName),s(2),c(e.ratingKey)}}function F(t,n){if(t&1&&R(0,j,5,2,"div",6,E),t&2){let e=C();x(e.ratings())}}var T=class t{fsaRatingsService=o(l);_ratings=d([]);ratings=this._ratings.asReadonly();loading=d(!1);fetchRatings(){this.loading.set(!0),this.fsaRatingsService.getRatingsResponse().subscribe({next:n=>{this._ratings.set(n.ratings),this.loading.set(!1)},error:()=>{this._ratings.set([]),this.loading.set(!1)}})}constructor(){this.fetchRatings()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-ratings"]],decls:12,vars:1,consts:[[1,"flex","flex-col","items-center","gap-8","py-8"],[1,"w-full","max-w-xl","shadow-lg"],[1,"text-xl","font-bold"],[1,"flex","flex-col","gap-4"],[1,"text-center","py-4","text-gray-500"],["mat-raised-button","","color","primary",1,"w-full",3,"click"],[1,"flex","items-center","justify-between","p-4","rounded","bg-gray-100"],[1,"font-medium"],[1,"text-lg","font-bold","text-blue-600"]],template:function(e,g){e&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title",2),r(4,"FSA Ratings"),a()(),i(5,"mat-card-content")(6,"div",3),f(7,N,2,0,"div",4)(8,F,2,0),a()(),i(9,"mat-card-actions")(10,"button",5),v("click",function(){return g.fetchRatings()}),r(11," Refresh Ratings "),a()()()()),e&2&&(s(7),u(g.loading()?7:8))},dependencies:[I,b,M,_,S,y,D,w],encapsulation:2,changeDetection:0})};export{T as RatingsComponent};
