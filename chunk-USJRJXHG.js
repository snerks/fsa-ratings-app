import{a as j,c as z,d as P,e as F,f as O}from"./chunk-Z6QTY4KK.js";import{$ as T,G as I,La as n,Ma as c,Na as m,O as E,Pa as A,Qa as R,Sa as B,Ta as G,U as k,V as r,hb as U,ja as h,ka as S,la as M,ma as e,na as t,nb as V,oa as N,ya as x}from"./chunk-KENTT67D.js";var Q=[{Id:1,ScoreCategory:"Confidence",Score:0,Description:"Very good",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/1"}]},{Id:2,ScoreCategory:"Confidence",Score:5,Description:"Good",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/2"}]},{Id:3,ScoreCategory:"Confidence",Score:10,Description:"Generally satisfactory",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/3"}]},{Id:4,ScoreCategory:"Confidence",Score:20,Description:"Major improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/4"}]},{Id:5,ScoreCategory:"Confidence",Score:30,Description:"Urgent improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/5"}]},{Id:6,ScoreCategory:"Hygiene",Score:0,Description:"Very good",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/6"}]},{Id:7,ScoreCategory:"Hygiene",Score:5,Description:"Good",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/7"}]},{Id:8,ScoreCategory:"Hygiene",Score:10,Description:"Generally satisfactory",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/8"}]},{Id:9,ScoreCategory:"Hygiene",Score:15,Description:"Improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/9"}]},{Id:10,ScoreCategory:"Hygiene",Score:20,Description:"Major improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/10"}]},{Id:11,ScoreCategory:"Hygiene",Score:25,Description:"Urgent improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/11"}]},{Id:12,ScoreCategory:"Structural",Score:0,Description:"Very good",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/12"}]},{Id:13,ScoreCategory:"Structural",Score:5,Description:"Good",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/13"}]},{Id:14,ScoreCategory:"Structural",Score:10,Description:"Generally satisfactory",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/14"}]},{Id:15,ScoreCategory:"Structural",Score:15,Description:"Improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/15"}]},{Id:16,ScoreCategory:"Structural",Score:20,Description:"Major improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/16"}]},{Id:17,ScoreCategory:"Structural",Score:25,Description:"Urgent improvement necessary",links:[{rel:"self",href:"http://api.ratings.food.gov.uk/scoredescriptors/17"}]}];function J(o,a){if(o&1&&N(0,"img",3),o&2){let i,s,p=x();M("alt",A("",(i=p.establishment())==null?null:i.BusinessType," icon"))("src",p.getBusinessTypeIcon((s=p.establishment())==null?null:s.BusinessType),k)}}function K(o,a){o&1&&(e(0,"div",7),n(1,"Loading..."),t())}function W(o,a){if(o&1&&(e(0,"a",19),n(1," View on Google Maps "),t()),o&2){let i,s=x(2);M("href",R("https://www.google.com/maps/search/?api=1&query=",(i=s.establishment())==null||i.geocode==null?null:i.geocode.latitude,",",(i=s.establishment())==null||i.geocode==null?null:i.geocode.longitude),k)}}function X(o,a){o&1&&(e(0,"span",20),n(1,"Location not available"),t())}function Y(o,a){if(o&1&&(e(0,"div",8)(1,"div",10)(2,"div",11),n(3),t()(),e(4,"div",12)(5,"span",13),n(6,"Address"),t(),e(7,"span"),n(8),t(),e(9,"span"),n(10),t(),e(11,"span"),n(12),t(),e(13,"span"),n(14),t(),e(15,"span",14),n(16),t()(),e(17,"div",12)(18,"span",13),n(19,"Local Authority"),t(),e(20,"span"),n(21),t()(),e(22,"div",10)(23,"span",13),n(24,"Scores"),t(),e(25,"ul",15)(26,"li",16)(27,"span",13),n(28,"Hygiene:"),t(),e(29,"span",14),n(30),t(),e(31,"span",6),n(32),t()(),e(33,"li",16)(34,"span",13),n(35,"Structural:"),t(),e(36,"span",14),n(37),t(),e(38,"span",6),n(39),t()(),e(40,"li",16)(41,"span",13),n(42,"Confidence:"),t(),e(43,"span",14),n(44),t(),e(45,"span",6),n(46),t()()()(),e(47,"div",12)(48,"span",13),n(49,"Rating"),t(),e(50,"span",17),n(51),t()(),e(52,"div",12)(53,"span",13),n(54,"Inspection Date"),t(),e(55,"span",14),n(56),B(57,"date"),t()(),e(58,"div",18)(59,"span",13),n(60,"Location"),t(),h(61,W,2,3,"a",19)(62,X,2,0,"span",20),t()()),o&2){let i,s,p,u,g,w,L,b,v,y,_,C,D,H,f,d,l=x();r(3),m(" FHRSID: ",(i=l.establishment())==null?null:i.FHRSID," "),r(5),c((s=l.establishment())==null?null:s.AddressLine1),r(2),c((p=l.establishment())==null?null:p.AddressLine2),r(2),c((u=l.establishment())==null?null:u.AddressLine3),r(2),c((g=l.establishment())==null?null:g.AddressLine4),r(2),c((w=l.establishment())==null?null:w.PostCode),r(5),c((L=l.establishment())==null?null:L.LocalAuthorityName),r(9),c((b=l.establishment())==null||b.scores==null?null:b.scores.Hygiene),r(2),m(" ",l.getScoreDescription("Hygiene",(v=l.establishment())==null||v.scores==null?null:v.scores.Hygiene)," "),r(5),c((y=l.establishment())==null||y.scores==null?null:y.scores.Structural),r(2),m(" ",l.getScoreDescription("Structural",(_=l.establishment())==null||_.scores==null?null:_.scores.Structural)," "),r(5),c((C=l.establishment())==null||C.scores==null?null:C.scores.ConfidenceInManagement),r(2),m(" ",l.getScoreDescription("Confidence",(D=l.establishment())==null||D.scores==null?null:D.scores.ConfidenceInManagement)," "),r(5),m(" ",(H=l.establishment())==null?null:H.RatingValue," "),r(5),c((f=l.establishment())!=null&&f.RatingDate?G(57,16,(f=l.establishment())==null?null:f.RatingDate,"longDate"):"N/A"),r(5),S(!((d=l.establishment())==null||d.geocode==null)&&d.geocode.latitude&&(!((d=l.establishment())==null||d.geocode==null)&&d.geocode.longitude)?61:62)}}function Z(o,a){o&1&&(e(0,"div",9),n(1," Establishment not found. "),t())}var q=class o{route=I(V);searchService=I(O);_establishment=E(null);establishment=this._establishment.asReadonly();loading=E(!0);lastQuery=JSON.stringify(this.searchService.lastQuery());constructor(){let a=Number(this.route.snapshot.paramMap.get("id"));this.searchService.getEstablishment(a).subscribe({next:i=>{this._establishment.set(i),this.loading.set(!1)},error:()=>{this._establishment.set(null),this.loading.set(!1)}})}getBusinessTypeIcon(a){if(!a)return"";switch(a.toLowerCase()){case"pub/bar/nightclub":return"icons/pub.svg";case"restaurant/cafe/canteen":return"icons/restaurant.svg";case"takeaway/sandwich shop":return"icons/takeaway.svg";case"school/college/university":return"icons/school.svg";case"hotel/bed & breakfast/guest house":return"icons/hotel.svg";default:return"icons/other.svg"}}getScoreDescription(a,i){let s=Q.find(p=>p.ScoreCategory.toLowerCase()===a.toLowerCase()&&p.Score===i);return s?s.Description:""}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=T({type:o,selectors:[["app-establishment-details"]],decls:14,vars:4,consts:[[1,"flex","flex-col","items-center","gap-8","py-8"],[1,"w-full","max-w-2xl","shadow-lg"],[1,"flex","items-center","gap-3"],["ngOptimizedImage","",1,"w-8","h-8","inline-block","align-middle",3,"src","alt"],[1,"flex","flex-col"],[1,"font-semibold","text-xl"],[1,"text-gray-600"],[1,"text-center","py-4","text-gray-500"],[1,"flex","flex-col","gap-6"],[1,"text-center","py-4","text-red-500"],[1,"flex","flex-col","gap-2","border-b","pb-4"],[1,"text-sm","text-gray-500","mt-2"],[1,"flex","flex-col","gap-1","border-b","pb-4"],[1,"font-semibold"],[1,"font-mono"],[1,"list-none","pl-0"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-blue-600","text-lg"],[1,"flex","flex-col","gap-1"],["target","_blank","rel","noopener",1,"text-blue-600","underline",3,"href"],[1,"text-gray-500"]],template:function(i,s){if(i&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2),h(4,J,1,3,"img",3),e(5,"div",4)(6,"span",5),n(7),t(),e(8,"span",6),n(9),t()()()(),e(10,"mat-card-content"),h(11,K,2,0,"div",7)(12,Y,63,19,"div",8)(13,Z,2,0,"div",9),t()()()),i&2){let p,u,g;r(4),S((p=s.establishment())!=null&&p.BusinessType?4:-1),r(3),c((u=s.establishment())==null?null:u.BusinessName),r(2),c((g=s.establishment())==null?null:g.BusinessType),r(2),S(s.loading()?11:s.establishment()?12:13)}},dependencies:[F,j,z,P,U],encapsulation:2,changeDetection:0})};export{q as EstablishmentDetailsComponent};
